=============================================================================
INSTRUÃ‡Ã•ES COMPLETAS PARA SETUP DA PLATAFORMA DE AGENDAMENTO
=============================================================================

Este arquivo contÃ©m todas as instruÃ§Ãµes necessÃ¡rias para configurar e executar
o projeto da plataforma de agendamento SaaS com zero custo fixo.

=============================================================================
1. PRÃ‰-REQUISITOS
=============================================================================

âœ… Node.js 18+ instalado
âœ… pnpm instalado (npm install -g pnpm)
âœ… Git instalado
âœ… Conta no GitHub
âœ… Conta no Supabase (gratuita)
âœ… Conta no Vercel (gratuita)
âœ… Conta no Cloudflare (gratuita)
âœ… Conta no Upstash (gratuita)
âœ… Conta no Resend (gratuita)

=============================================================================
2. CONFIGURAÃ‡ÃƒO INICIAL
=============================================================================

1. Clone o repositÃ³rio:
   git clone <URL_DO_SEU_REPO>
   cd plataforma-agenda

2. Instale as dependÃªncias:
   pnpm install

3. Copie o arquivo de variÃ¡veis de ambiente:
   cp env.example .env.local

=============================================================================
3. CONFIGURAÃ‡ÃƒO DO SUPABASE
=============================================================================

1. Acesse https://supabase.com e crie uma conta gratuita

2. Crie um novo projeto:
   - Nome: "plataforma-agenda"
   - Database Password: (anote esta senha)
   - Region: SÃ£o Paulo (se disponÃ­vel)

3. ApÃ³s criar o projeto, vÃ¡ em Settings > API e copie:
   - Project URL
   - anon public key
   - service_role key

4. Execute as migraÃ§Ãµes SQL no Supabase:
   - VÃ¡ em SQL Editor
   - Execute o conteÃºdo do arquivo database/migrations/001_initial_schema.sql
   - Execute o conteÃºdo do arquivo database/migrations/002_rls_policies.sql
   - Execute o conteÃºdo do arquivo database/seeds/001_demo_data.sql

5. Configure as variÃ¡veis de ambiente no .env.local:
   DATABASE_URL=postgresql://postgres:[SUA_SENHA]@db.[PROJECT_REF].supabase.co:5432/postgres
   SUPABASE_URL=https://[PROJECT_REF].supabase.co
   SUPABASE_ANON_KEY=[ANON_KEY]
   SUPABASE_SERVICE_ROLE_KEY=[SERVICE_ROLE_KEY]

=============================================================================
4. CONFIGURAÃ‡ÃƒO DO UPSTASH REDIS
=============================================================================

1. Acesse https://upstash.com e crie uma conta gratuita

2. Crie um novo database:
   - Name: "plataforma-agenda-cache"
   - Region: SÃ£o Paulo (se disponÃ­vel)
   - TLS: Enabled

3. ApÃ³s criar, copie:
   - UPSTASH_REDIS_REST_URL
   - UPSTASH_REDIS_REST_TOKEN

4. Configure no .env.local:
   UPSTASH_REDIS_REST_URL=[URL_DO_REDIS]
   UPSTASH_REDIS_REST_TOKEN=[TOKEN_DO_REDIS]

=============================================================================
5. CONFIGURAÃ‡ÃƒO DO RESEND (E-MAIL)
=============================================================================

1. Acesse https://resend.com e crie uma conta gratuita

2. Verifique seu domÃ­nio ou use o domÃ­nio de teste

3. Copie a API Key

4. Configure no .env.local:
   RESEND_API_KEY=[SUA_API_KEY]
   RESEND_FROM_EMAIL=noreply@seudominio.com

=============================================================================
6. CONFIGURAÃ‡ÃƒO DO CLOUDFLARE WORKERS
=============================================================================

1. Acesse https://cloudflare.com e crie uma conta gratuita

2. Instale o Wrangler CLI:
   npm install -g wrangler

3. FaÃ§a login no Wrangler:
   wrangler login

4. Configure o wrangler.toml em apps/worker/:
   [env.production]
   name = "plataforma-agenda-api"
   account_id = "[SEU_ACCOUNT_ID]"
   workers_dev = true
   compatibility_date = "2024-01-01"

   [env.production.vars]
   SUPABASE_URL = "[SUA_SUPABASE_URL]"
   SUPABASE_ANON_KEY = "[SUA_SUPABASE_ANON_KEY]"
   SUPABASE_SERVICE_ROLE_KEY = "[SUA_SUPABASE_SERVICE_ROLE_KEY]"
   UPSTASH_REDIS_REST_URL = "[SUA_REDIS_URL]"
   UPSTASH_REDIS_REST_TOKEN = "[SUA_REDIS_TOKEN]"
   RESEND_API_KEY = "[SUA_RESEND_API_KEY]"
   JWT_SECRET = "[SEU_JWT_SECRET]"

5. Configure as variÃ¡veis de ambiente no .env.local:
   CLOUDFLARE_ACCOUNT_ID=[SEU_ACCOUNT_ID]
   CLOUDFLARE_API_TOKEN=[SEU_API_TOKEN]

=============================================================================
7. CONFIGURAÃ‡ÃƒO DO VERCEL
=============================================================================

1. Acesse https://vercel.com e crie uma conta gratuita

2. Conecte seu repositÃ³rio GitHub ao Vercel

3. Configure as variÃ¡veis de ambiente no Vercel:
   - SUPABASE_URL
   - SUPABASE_ANON_KEY
   - UPSTASH_REDIS_REST_URL
   - UPSTASH_REDIS_REST_TOKEN
   - RESEND_API_KEY
   - JWT_SECRET
   - NEXTAUTH_URL (URL do seu domÃ­nio)
   - NEXTAUTH_SECRET (chave secreta para NextAuth)

4. Configure o build command:
   pnpm build:web

5. Configure o output directory:
   apps/web/.next

=============================================================================
8. CONFIGURAÃ‡ÃƒO DAS VARIÃVEIS DE AMBIENTE COMPLETAS
=============================================================================

Copie este conteÃºdo para o arquivo .env.local:

# Supabase
DATABASE_URL=postgresql://postgres:[SUA_SENHA]@db.[PROJECT_REF].supabase.co:5432/postgres
SUPABASE_URL=https://[PROJECT_REF].supabase.co
SUPABASE_ANON_KEY=[ANON_KEY]
SUPABASE_SERVICE_ROLE_KEY=[SERVICE_ROLE_KEY]

# Redis (Upstash)
UPSTASH_REDIS_REST_URL=https://[REDIS_URL].upstash.io
UPSTASH_REDIS_REST_TOKEN=[REDIS_TOKEN]

# E-mail (Resend)
RESEND_API_KEY=[RESEND_API_KEY]
RESEND_FROM_EMAIL=noreply@seudominio.com

# JWT e Auth
JWT_SECRET=[GERAR_CHAVE_SECRETA_32_CARACTERES]
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=[GERAR_CHAVE_SECRETA_32_CARACTERES]

# App
APP_BASE_URL=http://localhost:3000
API_BASE_URL=http://localhost:8787
TIMEZONE=America/Sao_Paulo
DEFAULT_LOCALE=pt-BR
NODE_ENV=development

# Cloudflare
CLOUDFLARE_ACCOUNT_ID=[SEU_ACCOUNT_ID]
CLOUDFLARE_API_TOKEN=[SEU_API_TOKEN]

# Feature Flags
ENABLE_PAYMENTS=false
ENABLE_ANALYTICS=false
ENABLE_NOTIFICATIONS=true

# Limites
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000
CACHE_TTL_SECONDS=120
MAX_FILE_SIZE_MB=5

# Logs
LOG_LEVEL=info

=============================================================================
9. EXECUTANDO O PROJETO LOCALMENTE
=============================================================================

1. Build do pacote core:
   pnpm build:core

2. Em um terminal, execute o frontend:
   pnpm dev:web

3. Em outro terminal, execute a API:
   pnpm dev:worker

4. Acesse:
   - Frontend: http://localhost:3000
   - API: http://localhost:8787

=============================================================================
10. DEPLOY EM PRODUÃ‡ÃƒO
=============================================================================

1. Deploy da API (Cloudflare Workers):
   cd apps/worker
   wrangler deploy --env production

2. Deploy do Frontend (Vercel):
   - Conecte o repositÃ³rio ao Vercel
   - Configure as variÃ¡veis de ambiente
   - Deploy automÃ¡tico serÃ¡ feito

3. Configure os domÃ­nios:
   - Frontend: https://seudominio.vercel.app
   - API: https://plataforma-agenda-api.[SEU_SUBDOMINIO].workers.dev

4. Atualize as variÃ¡veis de ambiente:
   APP_BASE_URL=https://seudominio.vercel.app
   API_BASE_URL=https://plataforma-agenda-api.[SEU_SUBDOMINIO].workers.dev
   NEXTAUTH_URL=https://seudominio.vercel.app

=============================================================================
11. CONFIGURAÃ‡ÃƒO DO CRON (LEMBRETES)
=============================================================================

1. No Cloudflare Workers, configure o cron trigger:
   - VÃ¡ em Workers & Pages > seu worker > Triggers
   - Adicione um Cron Trigger:
     - Cron expression: "0 */1 * * *" (a cada hora)
     - Route: /cron/reminders

2. Ou use o Wrangler:
   wrangler deploy --env production --schedule "0 */1 * * *"

=============================================================================
12. TESTANDO O SISTEMA
=============================================================================

1. Teste de autenticaÃ§Ã£o:
   - Acesse http://localhost:3000
   - Crie uma conta
   - FaÃ§a login

2. Teste de agendamento:
   - Crie uma unidade
   - Adicione profissionais
   - Crie serviÃ§os
   - Configure horÃ¡rios
   - Teste o booking pÃºblico

3. Teste de notificaÃ§Ãµes:
   - Crie um agendamento
   - Verifique se o e-mail foi enviado

4. Teste de relatÃ³rios:
   - Acesse a seÃ§Ã£o de relatÃ³rios
   - Gere relatÃ³rios por perÃ­odo

=============================================================================
13. COMANDOS ÃšTEIS
=============================================================================

# Desenvolvimento
pnpm dev              # Todos os serviÃ§os
pnpm dev:web          # Apenas frontend
pnpm dev:worker       # Apenas API

# Build
pnpm build            # Build completo
pnpm build:web        # Build frontend
pnpm build:worker     # Build API
pnpm build:core       # Build pacote core

# Testes
pnpm test             # Todos os testes
pnpm test:unit        # Testes unitÃ¡rios
pnpm test:e2e         # Testes E2E

# Lint e Type Check
pnpm lint             # ESLint
pnpm type-check       # TypeScript

# Banco de dados
pnpm db:migrate       # Executar migraÃ§Ãµes
pnpm db:seed          # Executar seeds
pnpm db:reset         # Reset do banco

# Deploy
wrangler deploy       # Deploy da API
vercel --prod         # Deploy do frontend

=============================================================================
14. ESTRUTURA DE ARQUIVOS IMPORTANTES
=============================================================================

ğŸ“ apps/
  ğŸ“ web/                 # Next.js App (Frontend)
  ğŸ“ worker/              # Cloudflare Workers (API)

ğŸ“ packages/
  ğŸ“ core/                # SDK compartilhado
  ğŸ“ ui/                  # Componentes UI

ğŸ“ database/
  ğŸ“ migrations/          # MigraÃ§Ãµes SQL
  ğŸ“ seeds/               # Dados iniciais

ğŸ“ docs/                  # DocumentaÃ§Ã£o

=============================================================================
15. TROUBLESHOOTING
=============================================================================

âŒ Erro de conexÃ£o com Supabase:
   - Verifique as variÃ¡veis de ambiente
   - Confirme se o projeto estÃ¡ ativo
   - Verifique se as migraÃ§Ãµes foram executadas

âŒ Erro de cache Redis:
   - Verifique as credenciais do Upstash
   - Confirme se o database estÃ¡ ativo

âŒ Erro de e-mail:
   - Verifique a API key do Resend
   - Confirme se o domÃ­nio estÃ¡ verificado

âŒ Erro de build:
   - Execute pnpm install
   - Limpe o cache: pnpm clean
   - Verifique se o Node.js Ã© 18+

âŒ Erro de deploy:
   - Verifique as variÃ¡veis de ambiente
   - Confirme se as contas estÃ£o ativas
   - Verifique os logs de erro

=============================================================================
16. PRÃ“XIMOS PASSOS
=============================================================================

âœ… Sistema bÃ¡sico funcionando
ğŸ”„ Implementar pagamentos (Mercado Pago/Stripe)
ğŸ”„ Adicionar mais relatÃ³rios
ğŸ”„ Implementar notificaÃ§Ãµes push
ğŸ”„ Adicionar integraÃ§Ã£o com WhatsApp
ğŸ”„ Implementar sistema de fidelidade
ğŸ”„ Adicionar dashboard avanÃ§ado
ğŸ”„ Implementar backup automÃ¡tico
ğŸ”„ Adicionar testes automatizados

=============================================================================
17. SUPORTE
=============================================================================

Para dÃºvidas ou problemas:
1. Verifique os logs de erro
2. Consulte a documentaÃ§Ã£o do Supabase
3. Abra uma issue no repositÃ³rio
4. Entre em contato com o suporte

=============================================================================
18. LICENÃ‡A
=============================================================================

Este projeto Ã© open source e pode ser usado livremente.
Mantenha os crÃ©ditos originais se redistribuir.

=============================================================================

ğŸ‰ PARABÃ‰NS! Seu SaaS de agendamento estÃ¡ pronto para uso!

Data de criaÃ§Ã£o: $(date)
VersÃ£o: 1.0.0
Desenvolvido com â¤ï¸ para o mercado brasileiro
